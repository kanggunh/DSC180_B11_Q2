Paper #: 27


Intensity (a.u.) hν (eV) Supplementary Figure  18 . Drift diffusion modelling using SCAPS-1D. a, ΔEC is the energy level misalignment between perovskite (brown) and the C60 (grey). Treating the surface of the perovskite with the organics causes the first few nm of film to realign. b, The dependence of bulk QFLS in the perovskite absorber and VOC of the cell with surface trap state density (δ) and ETL energetic misalignment (ΔEC). For low levels of perovskite/ETL misalignment, there is a strong correlation between QFLS and VOC. For larger band misalignment, the QFLS begins to taper to a fixed value. Reducing the offset between perovskite and ETL with the CF3-PEA treatment will increase the VOC of devices dramatically regardless of defect density, however this effect is increased for higher defect densities. c, Resultant J-V curves based on a control with a ΔEC = 0.64 and an interfacial defect density of 10  16  (equivalent to a surface recombination velocity of ~ 10 3 cm/s 9 ) and a CF3-PEA treated device with a ΔEC = 0.22 and an interfacial defect density of 10 15 (equivalent to a surface recombination velocity of ~ 100 cm/s). d, Comparison of true device EQE and EQE from simulations showing that significant charge lost in the device is uncounted for by the simulations. A possible cause is a poor-quality interface which does not extract charge as efficiently across the entire film. The parameters used for simulation are found in Table  S6 -7 below. Valence band effective density of states (cm -3 ) 1E18 1E18  12  1.8E18  Total defect density (cm -3 ) -1E15 1E14 
 Supplementary Table 1. The detail photovoltaic parameters of champion n-i-p and p-i-n type 
 Discussion of simulation parameters Thickness: Thicknesses were chosen to reflect our device architecture 
 Bandgap: The bandgaps of C60 and NiOx were taken from UPS/IPES measurements and  18  respectively. The bandgap of perovskite (1.78 eV) was taken from EQE measurements. 
 Electron affinity: The electron affinities of C60 and NiOx were taken from UPS measurements and  18  respectively. The electron affinity of the perovskite was determined from UPS/IPES measurements. 
 Dielectric permittivity: The dielectric permittivity of perovskite, NiOx and C60 were taken from  10, 11, 19  respectively. 
 Conduction/valence band effective density of states: The effective density of states for the conduction and valence bands (NC and NV respectively) were calculated using standard equations: 𝑁𝑁 𝐶𝐶 = 2 � 2𝜋𝜋𝑚𝑚 𝑒𝑒 * 𝑘𝑘𝑘𝑘 ℎ 2 � 3 2 𝑁𝑁 𝑉𝑉 = 2 � 2𝜋𝜋𝑚𝑚 ℎ * 𝑘𝑘𝑘𝑘 ℎ 2 � 3 2 where k is Boltzmann's constant, T is temperature and h is Planck's constant. The effective masses of electrons and holes (𝑚𝑚 𝑒𝑒 * and 𝑚𝑚 ℎ * respectively) were found in the literature. For C60, the value for electrons was taken from  11  and for holes it was assumed to be the same as the absorber, an assumption used previously in  20  . For perovskite, values from  15  were used. For NiOx, values from  13  were used. Electron/hole mobilities: Mobilities for NiOx are the same as used for the HTL layers in  20  . The electron and mobility of C60 is taken from  14  . Mobilities for perovskite are taken from  15  . Donor/acceptor densities: Our UPS results suggest that the perovskite is lightly p-type so have a low acceptor concentration of 1E15 cm -3 . The hole concentration of NiOx was taken from  16  . The electron concentration of C60 was taken to be 1E17 cm -3 similar to  17  . Bulk defects: Parameters concerning bulk defects were generated using the SCAPS standard settings which reflect real-world materials. 21 Supplementary Table  7 . Interface parameters used for simulation in SCAPS-1D. Interface defects: Parameters concerning defects were generated using the SCAPS standard settings which reflect real-world materials. The total defect density (cm -3 ) for the perovskite/ETL interface was increased from the 1E10 generated by SCAPS to 1E+14 based on  17  . For the perovskite HTL interface 1E12 was used, again using values from  22  . 
 Parameter Interfaces Perovskite  
 Supplementary Note 2: A detailed description of the simulators EnliTech (Class AAA) simulator was used for the J-V measurements of single-junction PSCs, and the JSC values can be easily corrected with a spectral mismatch factor. SAN-EI ELECTRIC (XHS-50S1), a two-lamp simulator including Xe-lamp and halogen-lamp, was used for the J-V measurement of tandem devices. The JSC and FF values of tandem solar cells are sensitive to the spectrum of simulator  25  . The spectral mismatch is within 2% at the wavelength range of 750-1100 nm, so we can get more accurate J-V results for all-perovskite tandem solar Operating stability has become a priority issue for all-perovskite tandem solar cells. Inorganic CsPbI 3-x Br x perovskites, which have good photostability against halide segregation, are promising alternatives for all-perovskite tandem solar cells. However, the interface between organic transport layers and inorganic perovskite suffers from a large energetic mismatch and inhibits charge extraction compared with hybrid analogues, resulting in low open-circuit voltages and fill factors. Here we show that inserting at this interface a passivating dipole layer having high molecular polarity-a molecule that interacts strongly with both inorganic perovskite and C 60 -reduces the energetic mismatch and accelerates the charge extraction. This strategy resulted in a power conversion efficiency (PCE) of 18.5% in wide-bandgap (WBG) devices. We report all-perovskite tandems using an inorganic WBG subcell, achieving a PCE of 25.6% (steady state 25.2%). Encapsulated tandems retain 96% of their initial performance after 1,000 h of simulated 1-sun operation at the maximum power point. All-perovskite tandem solar cells consisting of wide-bandgap (WBG) perovskite (~1.8 eV) and narrow-bandgap (NBG) perovskite (~1.2 eV) absorber layers extend the usable range of the solar spectrum and reduce thermalization losses in single-junction solar cells  [1] [2] [3] [4]   A mixed iodine-bromine WBG perovskite is required in tandems to achieve a high open-circuit voltage (V OC ), yet photoinstability of WBG organic-inorganic hybrid perovskites limits long-term stability  8  . Efficient tandem devices made using a hybrid WBG layer have so far maintained only >90% of initial PCE for 600 h of operation at their maximum power point (MPP)  5  . Inorganic CsPbI 3-x Br x perovskites exhibit increased photostability  [9] [10] [11]  and excellent thermal stability, so they are good candidates for WBG absorbers  [12] [13] [14]  . Despite this promise, the performance of all-inorganic PSCs, especially in the inverted p-i-n device structure, lags far behind organic-inorganic PSCs, a limitation dominated by low V OC and fill factors (FF)  [15] [16] [17] [18] [19]  , as listed in Supplementary Table  1 . We reasoned that fast crystallization with uncontrolled intermediate phases results in poor film quality for all-inorganic perovskites  [20] [21] [22]  . The high density of interfacial defects leads to poor contact between the CsPbI 3-x Br x perovskite and electron-transport layers (ETL), which demands more effective passivation strategies. Another key challenge is that WBG CsPbI 3-x Br x perovskite has an inferior energetic alignment Article  https://doi.org/10.1038/s41560-023-01250-7  passivated perovskite is strongest among the three passivators, which reduces device charge transfer resistance and accelerates interfacial charge transfer  39  . We used the Heyd-Scuseria-Ernzerhof (HSE) including spinorbital coupling (SOC) method to calculate the projected density of states (PDOS) of C 60 /perovskite heterojunction (Fig.  1e ). It can be found that these passivators (PEA, F-PEA and CF3-PEA) do not introduce sub-bandgap states. The CBM of the entire heterojunction originates from C 60 components. For the control and PEA passivated systems, the first conduction band (CB) of the perovskite component is far from the first CB of the C 60 component. However, for the CF3-PEA passivated system, the first two CBs become much closer in energy, and thus the CBMs of C 60 and perovskite align with each other. This indicates that electron extraction from the CF3-PEA passivated perovskite layer to the C 60 layer is more efficient than that in the control, PEA and F-PEA passivated cases  40  . We further studied the work function (WF) changes and CBM shifts upon three passivator treatments (Supplementary Table  3  and Supplementary Table  4 ). We found that F-PEA and CF3-PEA exhibit an increased WF and CBM downshift compared with the bare surface, while PEA exhibits a decreased WF and CBM upshift compared with the bare surface. The WF shift originates from two contributions  41, 42  , the intrinsic dipole of the ligands (µ intrinsic ) and the dipole created by the interaction between the ligands and the perovskite surface (µ interaction ). µ intrinsic and µ interaction lie in opposite directions along the z axis of the surface slabs and thus have an opposite effect on the WF. Because PEA has a lower molecular polarity, its µ intrinsic contribution was less than that of F-PEA and CF3-PEA and therefore insufficient to negate the WF decrease contributed by the µ interaction term, resulting in an overall WF decrease. We thus offer that in cationic-type passivated cases, a higher molecular polarity helps to induce a WF increase and improve electron extraction. 
 Photovoltaic performance of CsPbI 3-x Br x PSCs employing dipole layers DFT calculations indicated that CF3-PEA has the potential to provide more effective surface passivation and improved interfacial electron extraction than conventional PEA. To test this idea, we fabricated all-inorganic CsPbI 3-x Br x PSCs in the inverted p-i-n architecture to evaluate the effects of the three passivators on photovoltaic (PV) performance, and the preparation process is shown in Supplementary Fig.  3 . The optimized concentration in isopropanol (IPA) of PEA, F-PEA and CF3-PEA were all 1.0 mol% relative to Cs + (Supplementary Fig.  4 ). Figure  2a  and Table  1  compare the PV parameters of the control and passivated solar cells. Prototypical passivator PEA improved V OC slightly but reduced the short-circuit current density (J SC ) and FF, resulting in only a slight improvement in PCE. Encouragingly, F-PEA and CF3-PEA substantially improved the V OC and FF of devices without deteriorating J SC . Champion devices using CF3-PEA exhibited V OC up to 1.23 V, a gain of 220 mV compared with control devices. Accompanied with a noticeable FF improvement (80.7% to 82.8%) and high J SC (18.1 mA cm -2 ), the champion CF3-PEA device achieved a high PCE of 18.5%, the highest value for inverted all-inorganic perovskite with a bandgap around 1.8 eV. The steady-state PCE of the CF3-PEA device is 18.3% (Supplementary Fig.  5 ), well matched with the PCE determined from J-V scans. The J SC calculated from external quantum efficiency (EQE) agrees well with the value from J-V measurement (Fig.  2b ). Supplementary Fig.  6  shows the PCE histogram of 120 CF3-PEA passivated devices with an average PCE of 17.3% and a narrow distribution with standard deviation of 0.49%. The hysteresis index (defined as (PCE reverse - PCE forward ) / PCE reverse × 100%) of control, PEA, F-PEA and CF3-PEA devices are 13.9%, 11.1%, 4.0% and 3.0%, respectively (Fig.  2c ). The CF3-PEA device had the lowest hysteresis (PCEs of 18.5% vs 18.0% between reverse and forward scans), which is good compared with that of high-performance all-inorganic PSCs reported previously  43, 44  . This we attribute to defect with ETL  23, 24  , especially for C 60 that is commonly used in the inverted architecture  16, 25  . Inorganic perovskites typically have higher conduction band minimums (CBM) than the equivalent hybrid perovskite at the same bandgap  [26] [27] [28]  . The large conduction band offset (ΔEc ≈ 0.7 eV) at this interface not only severely hinders charge extraction and leads to large V OC losses  [29] [30] [31]  but also triggers the hysteresis in the response of current density-voltage (J-V) curves  32  . Molecules with a π-conjugated backbone have the potential to passivate trap states and facilitate charge transfer  [33] [34] [35] [36]  . Organic passivators with an asymmetric structure can induce an intramolecular dipole moment across an interface owing to the unequal electronegativity. In this Article, we find that introducing a dipole layer with high molecular polarity at the perovskite/C 60 interface reconfigures interfacial states to improve band alignment and increase the binding between inorganic perovskite and organic contacts. This strategy enables a PCE of 18.5% with a V OC of 1.23 V and average FF > 0.83 and an operational stability for over 2,000 h without PCE degradation under 1-sun illumination in WBG PSCs. Using this all-inorganic WBG subcell, we report all-perovskite tandem solar cells with a PCE of 25.6%. Encapsulated tandem devices exhibit promising operating stability, maintaining 96% of their initial performance after over 1,000 h operation at MPP. 
 Molecular structure design strategy Here we pursued a π-conjugated molecular structure to insert into perovskite/C 60 interface (Fig.  1a ). Starting with the commonly used passivant phenethylammonium (PEA) cations, we seek to regulate the electric dipole moment by introducing either F atom (4-Fluorophenethylammonium (F-PEA)) or CF3 group (4-(Trifluoromethyl) phenethylammonium (CF3-PEA)) at the para position of the amino group (Fig.  1b  and Supplementary Fig.  1 ). For this type of ammonium ligand, their -NH 3 + side tends to interact with the perovskite surface  37, 38  , while the other side interacts with the C 60 contact layer. The maximum electrostatic potential (φ max ) at the -NH 3 + side of each ligand is such that: φ max,PEA < φ max,F-PEA < φ max,CF3-PEA ; while the minimum electrostatic potential (φ min ) at the other side is: φ min,PEA > φ min,F-PEA > φ min,CF3-PEA . We posited that the higher φ max could increase the binding strength between the inorganic perovskite and passivator and that the lower φ min could increase the binding strength between ETL and passivated perovskite layers. The large difference between φ max and φ min within a ligand usually suggests high molecular polarity. We found that the dipole moments for the neutral molecules increase as the number of electron-withdrawing F groups increases (Supplementary Table  2 ). We carried out density functional theory (DFT) calculations to understand how the molecular structure of each passivator affects defect passivation and charge transport at the perovskite/ETL interface. Among the three passivation molecules, CF3-PEA binds to the perovskite most strongly by occupying the caesium vacancy site (Fig.  1c ), in accordance with its highest φ max when compared with PEA and F-PEA. A stronger binding with the perovskite surface suggests a more effective surface passivation because defective sites are more likely to be passivated. We revealed that in-gap states induced by deep-level defects, that is I-Pb antisites, are eliminated after passivation with PEA or CF3-PEA (Supplementary Fig.  2 ). The DFT simulation results herein indicate that better surface passivation enabled by CF3-PEA is mainly ascribed to stronger binding with defect sites on the perovskite surface. To study how the passivating molecules affect interfacial charge transport, we explored the interaction between the C 60 layer and the perovskite surface and charge extraction at the perovskite/C 60 interface. As shown in Fig.  1d , capping passivators induce notable charge redistribution. Charge accumulation within C 60 molecules is repressed when passivated by PEA molecules and is further promoted in cases by F-PEA and CF3-PEA passivated perovskite. The adsorption energy (E ads ) of C 60 on the control (bare), PEA, F-PEA and CF3-PEA passivated (110) perovskite surfaces are -0.47, -0.53, -0.57 and -0.71 eV, respectively. This indicates that the interaction between C 60 and CF3-PEA passivation by CF3-PEA and improved band alignment at the perovskite/C 60 interface  45, 46  , a trend also seen in DFT. We investigated the operational stability of all-inorganic CsPbI 3-x Br x PSCs using a multi-colour LED solar simulator with intensity equivalent to 100 mW cm -2 by continuously tracking the MPP in ambient conditions. The encapsulated CF3-PEA device maintained its initial PCE during 2,000 h of MPP operation (Fig.  2d ). We studied the role, in achieving higher photostability, of the all-inorganic CsPbI 3-x Br x films vs the effect of the dipole layer. Both the control and CF3-PEA-treated devices did not show any light-induced phase segregation after 20 minutes of 10-sun equivalent illumination. In contrast, organic-inorganic hybrid perovskite films with a similar bandgap exhibited serious phase separation under identical illumination conditions (Fig.  2d  inset and Supplementary Fig.  7 ). The inorganic PSCs also had higher thermal stability than do the organic-inorganic hybrid devices under 85 °C thermal stress (Supplementary Fig.  8  and Supplementary Fig.  9 ). 
 Characterization of CsPbI 3-x Br x perovskite films Next we sought to characterize the morphology and crystalline structure of CsPbI 3-x Br x perovskite films to reveal the interaction between perovskites and passivators. Scanning electron microscopy (SEM) images show dense, pinhole-free control films; the morphologies of films are unchanged after passivation (Fig.  3a ). Passivation treatments did not affect the overall crystallinity and no new phase was formed, as evidenced by X-ray diffraction (XRD) patterns (Fig.  3b ). If the concentration of passivators increased, we found peaks at low angles (2θ < 10°) appear, which correspond to diffraction signals of the original molecules (Supplementary Fig.  10 ). Once we used IPA to wash the high-concentration capping layers, all of these impurity XRD peaks disappeared. These results indicate that the passivators do not form 2D perovskite capping layers  47  , something we assign to the strong resistance of Cs + to ion exchange, which is consistent with previously reported results  48, 49  . The thin passivation layers also did not alter UV-vis absorption, and the band edges remain   nearly unchanged (~1.77 eV) (Supplementary Fig.  11 ). The PV bandgap estimated from the EQE spectra is about 1.78 eV (ref. 50) (Supplementary Fig.  12 ), which is comparable with the optical bandgap value of 1.77 eV (Supplementary Fig.  11 ). The elemental composition and electronic structure for the pristine and passivated CsPbI 3-x Br x films are determined by X-ray photoelectron spectroscopy (XPS) measurement. The XPS spectra of N 1s and F 1s shown in Fig.  3c, d  indicate the existence of the passivator molecules on the surface of passivated films. The Pb 4f XPS spectrum of the control film contains two main peaks at 138.06 eV and 142.92 eV, corresponding to the Pb 4f 7/2 and 5/2 orbitals, respectively. The Pb 4f peaks in the PEA passivated film shift towards higher binding energy by 0.08 eV, whereas the F-PEA and CF3-PEA passivated films shift to lower binding energies by 0.07 eV and 0.14 eV (Fig.  3e ), respectively. The XPS core level spectra of Cs 3d, I 3d and Br 3d in perovskite are shown in Supplementary Fig.  13 . The shift direction of binding energy for elements (Pb/Cs/I/Br) show the same trend, though the shift values are slightly different (Supplementary Table  5 ). In perovskite films with each passivator, the binding energy shift of Cs is the largest among characterized elements, indicating that the passivators have a stronger interaction with Cs  31, 33  . We further performed ultraviolet photoelectron spectroscopy (UPS) to investigate the surface energetics of perovskite films and C 60 layers (Supplementary Fig.  14  and Supplementary Fig.  15 ). From UPS we can see that PEA treatment decreases the WF of CsPbI 3-x Br x film surfaces from 4.86 to 4.83 eV with respect to the vacuum level, while F-PEA and CF3-PEA passivated films exhibit deeper WFs of 5.08 eV and 5.34 eV, respectively (Fig.  3f ). The ΔEc between the CBM of CsPbI 3-x Br x and pure C 60 (4.35 eV) for control, PEA-, F-PEA-and CF3-PEA-treated films are 0.74, 0.89, 0.44 and 0.16 eV, respectively. We also provide the estimated energetics of C 60 coated on different passivation perovskite films (Supplementary Fig.  16 ). The energy-level alignment was presented as referenced to the vacuum level and Fermi level (E F ), respectively (Supplementary Fig.  17 ). We found that the PEA enlarges the ΔEc between the perovskite and C 60 , while the F-PEA and CF3-PEA dipole layers reduce the ΔEc offset, which is consistent with the results obtained from separately measured C 60 on top of glass/ITO. Our DFT calculations also support above experimental results of the WF changes and CBM shift upon three passivator treatments. Drift-diffusion modelling shows that the approximately 210 mV V OC increase in CF3-PEA-treated devices can be linked to a reduced energy-level mismatch between perovskite and ETL (ΔEc) and trap passivation at the perovskite surface. When we vary the surface trap density, ΔEc presents the dominant effect. The model indicates that ΔEc affects V OC in two ways: increased recombination at the perovskite/C 60 interface, which reduces quasi Fermi level splitting (QFLS), and losses purely related to band alignment where the V OC is lower than the bulk QFLS (Supplementary Fig.  18 ). We measured the ideality factor of devices using each treatment (Supplementary Fig.  19 ); values of the control, PEA, F-PEA and CF3-PEA devices were 1.32, 1.25, 1.22 and 1.17, respectively. Reduced ideality factor of devices indicates suppressed non-radiative recombination. We measured the electroluminescence spectra of control and passivated PSC devices, operating as LEDs (Supplementary Fig.  20 ). The CF3-PEA-passivated devices achieved significantly higher electroluminescence intensity at various applied bias. Combined with the   
 Article https://doi.org/10.1038/s41560-023-01250-7  lowest ideality factors for the CF3-PEA passivated device, we confirm that CF3-PEA exhibits the most efficient suppression of trap-assisted recombination in devices among these three passivators. We performed steady-state photoluminescence (PL) and time-resolved photoluminescence (TRPL) to probe the radiative recombination and carrier transfer behaviour in CsPbI 3-x Br x films. The passivated CsPbI 3-x Br x films exhibit suppressed defect-induced non-radiative recombination, as evidenced by the increased PL intensities (Fig.  4a ). As shown in Fig.  4b , the CF3-PEA film coated with C 60 shows PL enhancement, indicating the C 60 does not induce as much recombination as it does for the control. This is due to passivation of surface defects and the band mismatch between the C 60 and the perovskite surface. The PEA device is not worse than the control (bigger mismatch) because the QFLS of films does not decrease beyond a mismatch of approximately 0.3 eV. And then the PEA film has a lower defect density. Figure  4c  presents TRPL of perovskite/C 60 junctions, from which we calculated the differential lifetime (Fig.  4d ) to distinguish charge extraction vs trap-assisted recombination. The first interval at shorter times is dominated by the transfer of electrons from the bulk into the C 60 , and the second interval at longer delay times is dominated by interfacial recombination  [51] [52] [53]  . The sharp drop in emission for CF3-PEA/ C 60 indicates efficient electron transfer at the interface, and the high plateau suggests a reduced trap density. We obtained the same trend under an increased excitation fluence of 58.3 nJ cm -2 (Supplementary Fig.  21  and Supplementary Table  8 ). Drift-diffusion modelling shows that the maximum achievable J SC based on absorption is 18.4 mA cm  -2  , assuming that all absorbed photons contribute to the current (Supplementary Fig.  18d ). CF3-PEA-treated devices show an average J SC increase of 0.5 mA cm -2 compared with control devices (Supplementary Note 1). 
 Performance and stability of all-perovskite tandems We then fabricated monolithic all-perovskite tandem solar cells using CF3-PEA passivated CsPbI 3-x Br x perovskite for the WBG subcells (Fig.  5a, b ). The champion tandem device exhibited a PCE of 25.6% under reverse scan with a V OC of 2.00 V, J SC of 16.1 mA cm -2 and FF of 79.6% (Fig.  5c  and Table  2 ). The integrated J SC values of the WBG and NBG subcells from EQE spectra are 16.2 and 16.4 mA cm -2 , respectively, in good agreement with the J SC values determined from J-V measurements (Fig.  5d ). The champion tandem device exhibited a stabilized PCE of 25.2% measured over 120 s (Fig.  5e ). Figure  5f  shows the PCE histogram of 50 tandem solar cells processed among several batches, indicating an average PCE of 24.3% and a good reproducibility. The photovoltaic performance of tandem solar cells with all-inorganic WBG subcells is comparable to that of tandem devices with inorganic-organic hybrid WBG perovskites reported in our previous studies  54, 55  . We found that the performance of CsPbI 3-x Br x PSCs slightly reduced in V OC and FF after replacing the C 60 /BCP-based ETL with C 60 / ALD-SnO 2 (ALD-SnO 2 : SnO 2 using atomic layer deposition), required in all-perovskite tandem solar cells (Supplementary Fig.  22 ). The performance reduction of devices with the ALD-SnO 2 layer could be explained by the following factors: (1) the approximately 100 minute-long heating at 75 °C during ALD processing possibly altered the metastable state of the all-inorganic perovskites 56 ; (2) the vacuum environment during ALD may accelerate the phase transition of all-inorganic perovskites 57 ; (3) the moisture injected during water pulses could be harmful to all-inorganic perovskites, of which the phase is very sensitive to moisture  48, 58  . Device stability is crucial for the commercialization of allperovskite tandems. We investigated long-term operational stability under simulated 1-sun illumination. We tracked the power output of encapsulated devices at their MPP in ambient air under a multi-colour LED solar simulator with intensity equivalent to 100 mW cm -2 . The tandem devices exhibit promising operational stability and maintained 96% of initial PCE after MPP operation over 1,000 h (Fig.  5g ), which is superior to the tandem devices with mixed-cation and mixed-halide hybrid WBG perovskites in previous reports  59, 60  . The inorganic WBG perovskites enable a substantial advance in operating stability, yet work remains to be done to increase the PCEs of all-perovskite tandem devices. To achieve PCEs beyond 30%, the V OC of the WBG front subcell must improve from 1.23 V reported here to greater than 1.4 V, something that may be obtained by further suppressing bulk and surface recombination. Regulating the rapid nucleation and crystallization process of all-inorganic perovskite films with additive and composition engineering is expected to reduce the bulk trap density. Higher V OC is further expected by reducing the hole transport layer/perovskite interfacial recombination losses. Another focus will be on further improving the phase stability of WBG inorganic perovskites, something enabled by composition engineering, to avoid performance degradation in front subcells during the sequent deposition steps of the tunnel recombination junction and NBG bottom subcells. We project that by combining such efforts, it will become possible to achieve PCEs of all-perovskite tandem solar cells that reach towards those of hybrid subcells. 
 Conclusions This work demonstrates efficient and stable all-perovskite tandem solar cells with an all-inorganic WBG subcell that provides improved photostability over hybrid perovskites. We demonstrate a strongly bonding electric dipole interlayer using high-polarity CF3-PEA molecules to passivate surface defects and regulate interfacial energy-level alignment, resulting in suppressed non-radiative charge recombination and improved interfacial electron extraction. Using the CF3-PEA passivator, inverted all-inorganic CsPbI 3-x Br x PSCs show a PCE of 18.5% with excellent operating stability over 2,000 h. We further achieve an efficiency of 25.6% (steady state 25.2%) in an all-perovskite tandem solar cell using a CsPbI 3-x Br x WBG subcell. The encapsulated tandem devices retain 96% of their initial performance after 1,000 h of simulated 1-sun illumination. This 1,000-h lifetime appears to surpass-by fully a factor of four times-the longest-operating lifetime reported in all-perovskite tandem cells  5  . The strategy contributes a facile route towards efficient and stable all-perovskite tandem solar cells. 
 Methods 
 First-principles calculations First-principles calculations based on density functional theory (DFT) were carried out using the Vienna Ab initio Simulation Package  61  . For the exchange-correlation functional, the Perdew-Burke-Ernzerhof functional  62  and the screened Heyd-Scuseria-Ernzerhof (HSE) hybrid functional  63, 64  were adopted. In addition, DFT-D3 method was used for the van der Waals correction  65  . The spin-orbital coupling (SOC) effect was included. The mixing parameter (α) of the Hartree-Fock term in HSE + SOC calculations was set to 0.45, which had been proven to reproduce the experimental bandgap. The plane-wave cut-off energy was 400 eV. The energy and force convergence criteria were set to 10 -5 eV and 0.03 eV Å -1 , respectively. The Brillouin zone was sampled with Γ-centred k-mesh densities of 2π × 0.03 Å -1 in the calculations of the energetic and electronic properties. We used a vacuum of 20 Å to separate neighbouring surfaces in the z direction. The binding  
 Perovskite precursor solution For WBG CsPbI 3-x Br x perovskite, DMAI:CsI:PbBr 2 :PbI 2 :PbCl 2 (molar ratio = 0.9:1:0.45:0.55:0.1) were dissolved in mixed DMF and DMSO solvents (volume ratio = 1:1.4) at a concentration of 0.95 M and were stirred at 60 °C in a N 2 glovebox for 2 h before film fabrication. The precursor solution was filtered through a 0.22 μm polytetrafluoroethylene (PTFE) membrane before making the perovskite films. For NBG FA 0.7 MA 0.3 Pb 0.5 Sn 0.5 I 3 perovskite, the precursor solution (2.0 M) was prepared in mixed solvents of DMF and DMSO with a volume ratio of 2:1. The molar ratios for FAI/MAI and PbI 2 /SnI 2 were 0.7:0.3 and 0.5:0.5, respectively. The molar ratio of (FAI + MAI)/(PbI 2 + SnI 2 ) was 1:1. SnF 2 (10 mol% relative to SnI 2 ) was added in the precursor solution. The precursor solution was stirred at room temperature for 2 h. Tin powders (5 mg ml -1 ) and FSA (0.3 mol%) were added in the precursor to reduce Sn 4+ in the precursor solution. The precursor solution with the remaining tin powders was filtered through a 0.22 μm PTFE membrane before making the perovskite films. 
 All-inorganic perovskite solar cell fabrication The pre-patterned ITO glass was sequentially washed with water, acetone and IPA sequentially and then treated with UV-ozone for 15 min before use. The NiO layer was spin coated onto the ITO substrate with a NiO nanocrystal suspension (20 mg ml -1 in water) at 3,000 r.p.m. for 30 s and subsequently annealed at 100 °C for 10 min in air. Self-assembled molecules (SAM) were used to optimize the NiO film  69  . The solutions of 2PACz and MeO-2PACz with the same concentration (0.2 mmol l -1 in IPA) were mixed with 1:3 ratio and then were spin coated on the NiO film at 4,000 r.p.m. for 20 s, followed by annealing at 100 °C for 5 min. After cooling, the substrates were immediately transferred to the glovebox. The perovskite precursor was spin coated on NiO/SAM at 2,600 r.p.m. for 150 s and was kept in the N 2 glovebox for 1 h before heating. The samples were then taken out from the glovebox and annealed at 170 °C for 20 min in ambient air with a humidity below 40%. For surface passivation, the passivation solution in IPA (1 mol%) was drop cast on perovskite film at 5,000 r.p.m. for 20 s, followed by drying at 90 °C for 3 min. Then the cooled films were washed by IPA at 5,000 r.p.m. for 20 s. After the cooling to room temperature, the substrates were transferred to the evaporation system. Finally, C 60 (20 nm), BCP (7 nm) and Cu (100 nm) were sequentially deposited on top of the perovskite by thermal evaporation. 
 Monolithic all-perovskite tandem solar cell fabrication The CsPbI 3-x Br x films were prepared as mentioned above. The substrates were transferred to the evaporation system after the fabrication of all-inorganic perovskite films, and 20-nm-thick C 60 film was deposited on top by thermal evaporation at a rate of 0.2 Å s -1 . The substrates were then transferred to the atomic layer deposition (ALD) system (Veeco Savannah S200) to deposit 20 nm SnO 2 at 75 °C using precursors of tetrakis(dimethylamino) tin(IV) (99.9999%, Nanjing Ai Mou Yuan Scientific Equipment Co.) and deionized water. After ALD deposition, the substrates were transferred back to the thermal evaporation system to deposit an ultra-thin layer of Au clusters layer (~1 nm) on ALD-SnO 2 . PEDOT:PSS layers were spin cast on top of front cells and annealed in air at 120 °C for 20 min. After the substrates had cooled, we immediately transferred the substrates to a nitrogen-filled glovebox for the deposition of NBG perovskite films. The perovskite films were deposited with two-step spin-coating procedures: (1) 1,000 r.p.m. for 10 s with a ramp up of 200 r.p.m. s -1 and (2) 4,000 r.p.m. for 40 s with a ramp up of 1,000 r.p.m. s -1 . Ethyl acetate (200 μl) was dropped on the spinning substrate during the second spin-coating step at 20 s before the end of the procedure. Finally, 20 nm C 60 , 7 nm BCP and 150 nm Cu films were sequentially deposited by thermal evaporation (Beijing Technol Science). Details on the deposition of ALD-SnO 2 layers can be found in our previous work  55  . 
 Characterization of solar cells For single-junction solar cells, the J-V characteristics were measured using a Keithley 2400 sourcemeter under the illumination of the solar simulator (EnliTech, Class AAA) at the light intensity of 100 mW cm -2 as checked with National Renewable Energy Laboratory (NREL)-calibrated reference solar cells (KG-5 and KG-0 reference cells were used for the measurements of WBG and NBG solar cells, respectively). Unless otherwise stated, the J-V curves were all measured under the same conditions 70 in a nitrogen-filled glovebox with a scanning rate of 200 mV s -1 (voltage steps of 20 mV and a delay time of 100 ms). The active area was determined by the aperture shade mask (0.049 cm 2 ) placed in front of the solar cells. EQE measurements were performed in ambient air using a QE system (EnliTech) with monochromatic light focused on device pixel and a chopper frequency of 20 Hz. For tandem solar cells, the J-V characteristics were carried out under the illumination of a two-lamp high-spectral-match solar simulator (SAN-EI ELECTRIC, XHS-50S1). The spectrum from the simulator was finely tuned to ensure that spectral mismatch is within 100 ± 3% for each 50-nm interval between wavelength range 400 nm and 1,000 nm. The solar simulator was set at the light intensity of 100 mW cm -2 as checked with a calibrated crystalline silicon reference solar cell with a quartz window (KG-0) (detailed discussion in Supplementary Note 2). EQE measurements were performed in ambient air, and the bias illumination from highly bright LEDs with emission peaks of 850 nm and 460 nm were used for the measurements of the front and back subcells, respectively. No bias voltage was applied during the EQE measurements of tandems. 
 Operational stability tests of solar cells The operating stability tests were carried out under simulated AM1.5 G illumination (Class AAA, multi-colour LED solar simulator, Guangzhou Article https://doi.org/10.1038/s41560-023-01250-7 
 EFig. 1 | 1 Fig. 1 | Density functional theory calculations of surface passivation and interfacial charge transport. a, Schematic structure of inverted CsPbI 3-x Br x PSCs. BCP, bathocuproine; SAM, self-assembled monolayer; ITO, indium tin oxide. b, Electrostatic potentials (φ), (φ max : blue colour; φ min : red colour) of each passivator (PEA, F-PEA and CF3-PEA). c, Binding energy between passivators and V Cs defects for an Cs-I terminated (001) perovskite surface. d, Charge density difference (blue, depletion; yellow, accumulation) of anchoring C 60 ETL onto the control and ammonium cation (PEA, F-PEA and CF3-PEA) passivated (110) perovskite surfaces. The same isosurface level is used. Calculated adsorption energies (E ads ) are also shown. The passivation molecules are shown in the dashed black box. The atoms in the structures are differentiated by different colours: Cs is represented by grass green, Pb by grey and I by purple. e, HSE + SOC calculated PDOS of the perovskite/C 60 heterojunction for each passivation strategy. The grey and orange dashed lines indicate the first CB levels of perovskite and C 60 at the interface, respectively. Pvsk: perovskite, e -: electron, h + : hole. The grey and orange arrows indicate the PDOS area of the perovskite layers and C 60 layers, respectively. The blue arrow denotes the direction of electron transport at the perovskite/C 60 interface. 'Fast' and 'Slow' labels indicate the fast/slow electron extraction property. 
 Article https://doi.org/10.1038/s41560-023-01250-7 
 Fig. 3 | 2 Fig. 4 | 324 Fig. 3 | Characterization of CsPbI 3-x Br x perovskite films. a, SEM images of perovskite films. b, XRD patterns of perovskite films. c-e, XPS spectra of N 1s (c), F 1s (d) and Pb 4f (e) core level. The vertical dashed lines indicate the binding energy position of Pb 4f in the control film. f, Energy-level alignment diagram 
 x Br x device with C 60 /ALD-SnO 2 structure NBG device MPP tracking under AM1.5 G illumination. Encapsulated devices operating in ambient condition. 
 3 Fig. 5 | 35 Fig. 5 | Performance of monolithic all-perovskite tandem solar cells. a,b, Schematic structure (a) and cross-sectional SEM image (b) of an allperovskite tandem solar cell. PEDOT, PSS: poly(3,4-ethylene dioxythiophene)poly(styrene sulfonate). c, The J-V measurements from a CsPbI 3-x Br x singlejunction device with C 60 /ALD-SnO 2 structure, a FA 0.7 MA 0.3 Pb 0.5 Sn 0.5 I 3 NBG device and a monolithic all-perovskite tandem cell. d, EQE curves of the bestperforming tandem cell. e, Stabilized power output of the champion tandem 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 Supplementary Figure15. Tauc-plot values of the C60 film. The dotted line is used to calculate the band gaps. 1.7 1.8 1.9 2.0 2.1 2.2 2.3 
 CsPbX3 perovskite solar cells. Supplementary Type Perovskite Structure Eg (eV) VOC (V) VOC loss (V) FF (%) JSC (mA cm -2 ) PCE (%) Ref. CsPbI3 FTO/TiO2/CsPbI3/spiro-OMeTAD/Au 1.7 1.20 0.50 84.1 20.8 21.0 1 n-i-p CsPbI2Br FTO/c-TiO2/mp-TiO2/M:CsPbI2Br/P3HT/Au 1.91 1.33 0.58 80.1 16.34 17.45 2 CsPbIBr2 ITO/TiO2/CsPbIBr2/PC61B M/P3HT/Au 2.08 1.31 0.77 74.5 11.79 11.54 3 CsPbI3 ITO/P3CT-N/CsPbI3/PCBM/Au 1.68 1.21 0.47 80.4 19.72 19.84 4 p-i-n CsPbI2Br ITO/P3CTN/CsPbI2Br/PCB M/C60/BCP/Ag 1.88 1.22 0.66 79.6 16.4 15.9 5 CsPbIBr2 ITO/NiO/MoS2/CsPbIBr2/N b2O5/Ag 2.03 1.29 0.74 69.5 12.29 10.98 6 CsPbI3-xBrx ITO/NiO/SAM/CsPbI3-xBrx/C60/BCP/Cu 1.77 1.23 0.54 82.8 18.1 18.5 This work 
 Table 3 . The HSE+SOC calculated work function (WF) of a perovskite surface treated with three passivators (PEA, F-PEA and CF3-PEA). 3 The mixing parameter (α) of the Hartree-Fock term in HSE+SOC calculations was set to 0.45. DFT-D3 method was used for the van der Waals (vdW) correction. The values obtained from experimental UPS data were also listed for comparison. Passivators HSE+SOC calculated WF Experimental WF bare 4.80 4.86 PEA 4.77 4.83 F-PEA 5.29 5.08 CF3-PEA 5.65 5.34 
 Table 4 . The HSE+SOC calculated CBM positions of a perovskite surface treated with three passivators (PEA, F-PEA and CF3-PEA) with respect to the CBM position of the bare surface. 4 The values obtained from experimental UPS data were also listed for comparison. Passivators HSE+SOC calculations Experiments bare 0 0 PEA 0.13 0.15 F-PEA -0.31 -0.30 CF3-PEA -0.64 -0.58 
 Table 5 . Binding energy and shift of elements in perovskites. 5 Samples Binding energy (eV) Pb Cs I Br Control 142.92 138.06 738.07 724.12 630.09 618.59 69.29 68.19 PEA 143.00 138.15 738.17 724.23 630.18 618.68 69.35 68.26 shift +0.08 +0.09 +0.10 +0.11 +0.09 +0.09 +0.06 +0.07 F-PEA 142.85 137.99 737.93 723.99 630.00 618.51 69.19 68.11 shift -0.07 -0.07 -0.14 -0.13 -0.09 -0.08 -0.10 -0.08 CF3-PEA 142.78 137.90 737.91 723.92 629.93 618.44 69.09 67.99 shift -0.14 -0.16 -0.16 -0.20 -0.16 -0.15 -0.20 -0.20 
 Table 6 . Material parameters used for simulation in SCAPS-1D. 6 Parameter 
 13     
 Capture cross section (holes) (cm -3 ) Electron mobility 1E-2 14 1.6E1 15 1E-3 (cm 2 /Vs) Hole mobility (cm 2 /Vs) 1E-2 1.6E1 1E-3 Shallow uniform acceptor 0 1E15 1E18 16 density, NA (cm -3 ) Shallow uniform donor 1E17 17 0 0 density, NA (cm -3 ) Defect type - Neutral Neutral Capture cross section - 1E-19 1E-15 (electrons) (cm -3 ) - 1E-19 1E-15 Energetic distribution - Single Single Energy level (eV) - 0.5 0.5 
 Table 8 . The TRPL of perovskite/C60 junctions. 8 /NiOx C60/Perovskite 
 Inorganic wide-bandgap perovskite subcells with dipole bridge for all-perovskite tandems Tiantian Li 1,2,6 , Jian Xu 3,6 , Renxing Lin 1 , Sam Teale 3 , Hongjiang Li 1 , Zhou Liu 1 , Chenyang Duan 1 , Qian Zhao 2 , Ke Xiao 1 , Pu Wu 1 , Bin Chen 3 , Sheng Jiang 4 , Shaobing Xiong 4 , Haowen Luo 1 , Sushu Wan 5 , Ludong Li 1 , Qinye Bao 4 , Yuxi Tian 5 , Xueping Gao 2 , Jin Xie 5 , Edward H. Sargent 3 & Hairen Tan 1 nature energy Article https://doi.org/10.1038/s41560-023-01250-7 cells. Multi-color LED solar simulator (Class AAA) was used to test the long-term stability of PSCs. Xe-lamp maintenance life is typically around 1000 hours, and the light intensity gradually decreases with identical input voltage and current. Halogen-lamp has an even shorter life of 50- 100 hours. Multi-color LED solar simulator (Class AAA) have a service life of greater than 10000 hours and can offer a stable spectrum for a long time. These features make LED simulator suitable for long-term stability tests at reasonable experimental costs. 
 PV performance of CsPbI 3-x Br x perovskite solar cells with dipole layers a 1.3 84 b 100 V OC (V) J SC (mA cm -2 ) 0.9 1.1 1.2 1.0 16 17 18 19 FF (%) PCE (%) 80 82 78 12 14 16 18 20 EQE (%) 80 0 20 40 60 PEA: 17.6 mA cm -2 F-PEA: 18.0 mA cm -2 CF3-PEA: 18.1 mA cm -2 Control: 17.7 mA cm -2 Control PEA F-PEA CF3-PEA Control PEA F-PEA CF3-PEA 300 400 500 600 700 800 Solar cell type Wavelength (nm) c 20 d ) Current density (mA cm -2 0 5 10 15 / / / Rev./for. / Control PEA CF3-PEA F-PEA Normalized PCE 0 0.2 0.4 0.6 0.8 1.0 MPP tracking under AM 1.5 G illumination. Encapsulated devices operating in ambient conditions. Normalized PL intensity 550 600 650 700 750 800 850 Wavelength (nm) 0 min 5 min 10 min 15 min 20 min 0 0.2 0.4 0.6 0.8 1.0 1.2 0 200 400 600 800 1,000 1,200 1,400 1,600 1,800 2,000 Voltage (V) Time (h) Fig. 2 | . a, PV parameters of control and passivated solar cells (26 devices for each type). The box plot denotes median (centre line), 75th (top edge of the box) and 25th (bottom edge of the box) percentiles. The solid dots represent each device datum. b, EQE curves of the four champion devices. c, J-V curves of the four champion devices for each condition. Rev., reverse scan; for., forward scan. J-V hysteresis performance was represented by the shaded area. d, MPP tracking of an encapsulated CF3-PEA device for over 2,000 h in air under simulated 1-sun solar illumination (equivalent to AM1.5 G, 100 mW cm -2 , multi-colour lightemitting diode (LED) simulator). The device had an initial PCE of 16.8%. The operating temperature of the device was around 35 °C, and the relative humidity was approximately 30-40%. The inset shows PL spectra of CF3-PEA film under 10-sun illumination for 0, 5, 10, 15 and 20 min. 
 Table 1 | PV parameters of the control and passivated PSCs 1 Device Scans V OC (V) J SC (mA cm -2 ) FF (%) PCE (%) SPO (%) HI (%) Control Reverse 1.01 17.6 80.7 14.4 13.4 13.9 Forward 0.99 17.5 71.4 12.4 Average 0.99 ± 0.02 17.6 ± 0.24 79.7 ± 0.64 13.8 ± 0.29 PEA Reverse 1.05 17.6 79.6 14.7 13.9 11.1 Forward 1.03 17.6 72.3 13.1 Average 1.04 ± 0.01 17.5 ± 0.22 79.3 ± 0.62 14.4 ± 0.23 F-PEA Reverse 1.13 18.0 81.7 16.5 16.1 4.0 Forward 1.12 17.8 79.7 15.9 Average 1.12 ± 0.02 17.6 ± 0.22 81.4 ± 0.41 16.1 ± 0.25 CF3-PEA Reverse 1.23 18.1 82.8 18.5 18.3 3.0 Forward 1.23 18.0 81.4 18.0 Average 1.20 ± 0.02 18.0 ± 0.14 83.2 ± 0.62 17.9 ± 0.32 Average rows: the values represent the average and standard deviation of 26 devices under reverse scan. SPO, stabilized power output; HI, hysteresis index. 
 Table 2 | Champion PV parameters of the WBG subcell with C 60 /ALD-SnO 2 structure, the NBG subcell and the all-perovskite tandem device 2 Device V OC (V) J SC (mA cm -2 ) FF (%) PCE (%) WBG subcell (with 1.19 17.5 80.6 16.6 ALD-SnO 2 ) NBG subcell 0.84 32.4 79.7 21.7 Tandem 2.00 16.1 79.6 25.6