Paper #: 94
Temporal and spatial pinhole constraints in smallmolecule hole transport layers for stable and efficient perovskite photovoltaics †
Small molecules, such as Spiro-OMeTAD, are widely used in photovoltaic devices including perovskite and dye-sensitized solar cells due to their excellent hole transport properties. However, this kind of small molecule is often used with hygroscopic additives and dopants suffering from aggregation and demixing under environmental stress and thus leading to pinholes/voids in the resultant films. By using typical molecular Spiro-OMeTAD as an example, we herein introduced a hydrophobic polymeric poly(4-vinylpyridine) (P4VP) component to substantially reduce the undesired pinholes during device fabrication and operation. It leads to a significant improvement of the long-term stability of devices, which kept 80% of their original PCE for over 6000 h in ambient air and the promotion of light stability. In addition, P4VP can saturate uncoordinated Pb sites in perovskite crystals, resulting in improved device performance (certified PCE of 20.6%) with negligible hysteresis. These results emphasize the effects of pinhole constraints in both the temporal and spatial perspectives, which provides a feasible approach to improve the stability of smallmolecule-based hole transport materials for perovskite solar cells and other optoelectronic devices.
Introduction Organic-inorganic halide perovskites have attracted tremendous attention in the photovoltaic eld due to their excellent optoelectronic properties including a high absorption coefficient, 1,2 long charge carrier lifetime,  3, 4  low trap density, 5 lowcost fabrication  6  and so on. With the continuous efforts from all over the world, the power conversion efficiencies (PCE) of perovskite solar cells (PSCs) have increased dramatically from 3.8% to a certied 23.7%.  2, [7] [8] [9] [10] [11] [12] [13]  Among all architectures, particularly regular (n-i-p) structured PSCs were extensively developed due to their simple fabrication and high efficiency.  [13] [14] [15]  A great deal of effort has been devoted into the exploration of ideal hole transport layer (HTL) materials, including polymers, small molecules, and inorganic species. Inorganic HTLs, mainly represented by CuI,  16  CuSCN 17 and NiO,  18  possess the advantages of both high mobility and low cost. However, it is difficult to deposit these inorganic HTLs on the top of perovskite materials without their damage and interaction, as the corresponding fabrication processes are mostly incompatible with the absorber underneath.  19  Polymeric materials such as commercial PTAA  [20] [21] [22]  and P3HT  [23] [24] [25]  can be well deposited on the perovskite layer. Due to their relatively low conductivity and consequently ultra-small thickness, they require perovskite lms with great wettability, which makes the resulting solar cells rarely achieve a similar reproducibility level to that of the state-of-the-art device.  26  Small molecules are another class of HTLs that have been successfully used in perovskite solar cells due to their excellent photoelectric properties and the ease of processing. However, as an interlayer between the perovskite and electrode, these small molecules are not only required to transport holes but also are desired to be dense enough to retard the invasion of ambient small molecules (especially H 2 O and O 2 ), as well as ion diffusion between the perovskite components and electrode, which are crucial to efficient and stable PSCs. Among small-molecule organic HTLs, Spiro-OMeTAD (Spiro) represents the most superb HTL because of its suitable highest occupied molecular orbital (HOMO) energy levels and excellent hole-extraction and transportation abilities.  27  Most of the stateof-art PSC devices are designed by using Spiro as the HTL.  11  However, as a small molecule, it is hard for Spiro to form pinhole free and uniform thin lms during spin coating due to its amorphous nature and the immiscibility of the Li-TFSI. The presence of pinholes largely deteriorates the optoelectronic properties and long-term stability of the resulting device. In addition, the conductivity of Spiro fails to meet the requirement for high performance devices. Therefore, most of the studies adopted a certain amount of Li-TFSI and 4-tert-butylpyridine (TBP) as effective additives/dopants 28 into Spiro to improve its conductivity. Unfortunately, these additives are highly hygroscopic, and can adsorb ambient moisture to segregate in the Spiro lm, which results in extra pinholes in the doped lm. These pinholes may allow small molecular species (such as H 2 O and O 2 ) in ambient air to invade the entire device, which leads to further degradation of PSCs. Meanwhile, the volatile species in the perovskite lm such as CH 3 NH 2 and HI could easily diffuse out via the pinholes to interact with electrodes,  29  leading to the formation of metal halides that corrode the electrodes.  30  In view of the disadvantages of Spiro, some reports have accordingly prepared pinhole-free Spiro by changing the solvent from the commonly used chlorobenzene to chloroform,  29, 31  or deposited Spiro lms via vacuum evaporation, to improve the long-term stability of related devices.  32  These methods only work with Spiro lms without additives, while for lms with additives, a large number of pinholes are generated due to water adsorption and accumulation during device operation, inducing further degradation. Therefore, preventing pinhole formation in Spiro layers under outdoor operating conditions is a key challenge to achieve long-term stable PSCs based on small-molecule HTLs. Here, by using Spiro as an example, we rst proposed a simple approach to greatly improve the lm quality of small molecule HTLs and the resulting long-term stability of the device. By introducing a long chain hydrophobic polymer poly(4-vinylpyridine) (P4VP) into the Spiro precursor solution, we successfully smoothed, strengthened and reduced the pinholes in the as-deposited HTL during the lm deposition. Meanwhile, the pinhole formation caused by the water absorption of additives during device storage in high humidity was effectively suppressed, as is clearly revealed by in situ optical microscopy measurement. Non-encapsulated P4VP modied PSCs exhibit better long-term stability in ambient air (about 25-50% relative humidity) and retain 80% of their original PCE for over 6000 h storage. In addition, the efficiency of the PSC based on P4VP was elevated to be 20.6% (certied) with negligible hysteresis, since P4VP can effectively passivate the under-coordinated Pb in the perovskite lms. These ndings highlight the effective HTL modication by suitable molecules for both better long-term stability and improved photovoltaic performance of PSCs. 
 Results and discussion To reduce the number of pinholes during small-molecule-based HTL formation using Spiro-OMeTAD, it is preferable to apply materials with excellent lm-forming capability which are hydrophobic and miscible with Spiro. To this end, a "so" polymer with a long carbon chain such as P4VP becomes an ideal candidate. The chemical structure of commercially available P4VP is shown in Fig.  S1 . † We use P4VP as an example to investigate the compatibility between the small molecule and polymer for highly efficient perovskite solar cells with improved stability. For convenience, we denote the reference (Spiro doped with Li-TFSI and TBP) as Spiro and the target sample (Li-TFSI and TBP doped Spiro modied with P4VP) as Spiro:P4VP. As a small molecule, Spiro is prone to easily form a certain number of pinholes during lm deposition by the spin-coating method.  29, 31  We observed similar results by scanning electron microscopy (SEM) (Fig.  1a ) and atomic force microscopy (AFM) (Fig.  1c ). Such pinholes dramatically reduce the quality of the HTL lm, further deteriorating the corresponding photovoltaic performance and stability of PSCs. Surprisingly, by introducing an optimal amount of P4VP (1 mg mL À1 ), we successfully reduced the pinholes in the HTL lm (Spiro:P4VP) compared to the pristine Spiro lm, as shown in Fig.  1b  and d . In addition, the obvious surface roughness caused by such pinholes existing in Spiro is largely reduced by P4VP, as shown in Fig.  1c  and d , indicative of a dense and uniform HTL lm. The root mean square roughness (RMS) for Spiro and Spiro:P4VP samples was measured to be 66 nm and 36 nm, respectively (Fig.  S2 † ). In consideration of the "so" characteristics of P4VP , which is easy to be cast into lms, it is reasonable to expect that these polymers help to reduce such pinholes occurred in the Spiro layer. In addition to the pinhole formation when depositing the small molecule, extra pinholes developed because the Li-TFSI serves as a moisture adsorption center. Prevention of the possible moisture effects for PSCs is a key issue, and protects both the perovskite layer and carrier transport layer simultaneously. The molecules with a hydrophobic long alkyl group generally have lower wettability with water. Accordingly, we measured the contact angle of water on the top of the Spiro lm and Spiro:P4VP lm. The obtained value is 44 for Spiro and 91 for Spiro:P4VP lm, respectively, as shown in Fig.  1e  and f . This implies that the P4VP modied HTL has superior hydrophobicity, which might better protect the perovskite and carrier transport lm from water invasion. Actually the invasion process of water into Li-TFSI doped Spiro lms is an adhesion process that involves three phases e.g. liquid, gas, and solid. Assuming a unit area at the interface of each phase, the change of Gibbs free energy during the process is as follows: DG ¼ g l-s À g l-g À g s-g (1) where g l-s , g l-g , and g s-g are the surface energies of liquid-solid, liquid-gas and solid-gas. Among all surface energies, g l-g can be directly measured through experiment and the value for water at room temperature is 0.072 N m À1 . According to Young's wetting formula, g s-g ¼ g l-s + g l-g cos q (2) where q is the contact angle that can be deduced using DG ¼ Àg g-l (1 + cos q) (3) According to formula (3) we calculate DG for the Spiro lm and Spiro:P4VP lm to be À0.124 and À0.071 J m À2 , respectively. The Spiro lm exhibits lower DG upon P4VP addition (Fig.  1g ), which indicates that the water adhesion process is less favored from a thermodynamic point of view. It is further inferred that the P4VP modied Spiro lm potentially improves the long term stability of the resultant devices, which is shown in the following part. Accordingly, the in situ morphology evolution of the Spiro lm and Spiro:P4VP lm was characterized to gain further insight into the differences of the pinhole formation processes under moist conditions (80% relative humidity). In order to control humidity during the in situ evolution of the optical microscopy test, we set up a small humidier and a hygrometer to precisely control the humidity when testing the sample. It has also been proved that the deviation of humidity in this case is less than 3%. As shown in Fig.  2a  and e, we selected the regions (0.20 Â 0.25 mm 2 ) of Spiro and P4VP modied Spiro lms before testing in a humid environment. It is observed that some pinholes were witnessed in the Spiro based lm, but were absent in the P4VP modied lm. With the prolongation of exposure time in the humid environment, we could observe that the pinholes in the Spiro lm (Fig.  2a-d ) were increased dramatically. By comparison, the introduction of P4VP into the Spiro lm leads to a signicantly reduced number of pinholes in the case of high humidity (Fig.  2e-h ). We calculated the number of pinholes in Spiro and Spiro:P4VP samples as a function of time, as shown in Fig.  2i . The signicant difference between the two lms indicates that P4VP is an effective polymer to prevent pinhole formation in the HTL in humidity. Therefore, through the P4VP molecule modication, it not only lls up the pinholes in small molecule during its fabrication, but also prevents extra void formation due to hydrophilic Li-TFSI, which complies well with the results of contact angle measurements. Combined with the in situ observation from optical microscopy images and hydrophilic/hydrophobic characteristics of the P4VP component, the expected functionality of Spiro:P4VP hole transport materials is shown in Fig.  2j . On one hand, hygroscopic Li-TFSI is much easier to adsorb surrounding water and thus produces extra pinholes. On the other hand, such pinholes existing in Spiro may provide more diffusion pathways for undesired ions, thereby causing further degradation of the entire solar cell. The presence of P4VP improves the mechanical properties of the whole layer due to elimination of pin holes, which helps to prevent the diffusion of small molecules (such as H 2 O and O 2 from surroundings and CH 3 NH 2 and HI from the perovskite lm), and thus offers an efficient method to enhance the long-term stability of Spiro based PSCs. The photovoltaic performance and stability of PSCs based on Spiro:P4VP were evaluated, and the Spiro based cells are used as a reference. As shown in Fig.  S3 , † the devices based on Spiro:P4VP achieved an average PCE of 20.16%, which is higher than that of the Spiro-based cells (19.11%). The enhancement of the PCE is mainly associated with the signicant improvement in the open-circuit photovoltage (V oc ) and ll factor (FF). Fig.  3a  Fig.  3   shows the best Spiro:P4VP based device which produces a PCE of 20.84%, with a V oc of 1.129 V, a J sc of 23.49 mA cm À2 , and a FF of 78.57%. The forward and reverse scanning current densityvoltage (J-V) curves showed reduced hysteresis in the resultant device compared to the reference. The corresponding photovoltaic parameters are summarized in Table  1 . By holding a bias near the maximum power output point, we obtained a stabilized efficiency of 19.31% for Spiro based and 20.34% for Spiro:P4VP based PSCs, respectively (Fig.  3b ). The external quantum efficiency (EQE) spectra of the two devices exhibit almost the same shape over the entire absorption wavelength range (Fig.  3c ). The integrated photocurrent densities are also close to each other, indicating that P4VP has no obvious effect on the spectral response of the PSC devices. In addition, the best P4VP modi-ed device was sent to the National Institute of Metrology, China (NIM, China) for certication, which conrmed a PCE of 20.6% under AM 1.5 G full-sun illumination (1000 W m À2 ) by reverse scan (1.2 to À0.1 V) and 19.8% under forward scan (À0.1 to 1.2 V), with a slow scan rate (33 mV s À1 ). The measurement details and results are shown in Fig.  S4 . † This certied efficiency also agrees well with our internal measurement results. To gain insight into the improvement of the V oc and the reduced hysteresis in the Spiro:P4VP based device, we fabricated hole-only devices (ITO/PEDOT:PSS/PVSK/Spiro or Spiro:P4VP/Au) to measure the trap-state density and the hole mobility in the full device. Fig.  3d  shows the dark state I-V curves of these two devices. The linear relationship indicates an "ohmic region" response of the hole-only device at low bias voltage. With the bias voltage increasing, the current quickly increases nonlinearly, demonstrating that the trap-states begin to be lled until the trap-lled limit is achieved. The trap-lled limit voltage (V TFL ) of the perovskite lms covered with Spiro and Spiro:P4VP is 0.98 and 0.64 V, respectively. Then the trapstate density can be determined from the V TFL using the equation: V TFL ¼ qn trap L 2 233 0 , where q is the elementary charge of the electron, L is the perovskite lm thickness, and 3 and 3 0 are the relative dielectric constant and the vacuum permittivity. Therefore, the hole trap-state density of the Spiro based perovskite is 9.64 Â 10 15 cm À3 , in good agreement with previous reports,  33  while this value is reduced to 6.29 Â 10 15 cm À3 for the Spiro:P4VP based perovskite, indicating that the lm quality is much improved. At a high bias voltage the current shows a linear relationship with the square of the voltage (I f V 2 ). We thus obtain carrier mobility from the Mott-Gurney law:  34  the mobilities (m) of the samples with and without P4VP modication are calculated to be 0.18 cm 2 V À1 s À1 and 0.17 cm 2 V À1 s À1 , respectively. The enhancement of hole mobility and the reduction of defect state density in the perovskite lm improve the resulting optoelectronic properties of the devices. This is also consistent with the reduced photoluminescence (PL) spectral response and shorter lifetime obtained by time-resolved photoluminescence (TRPL) measurement (Fig.  S5 , S6, Table  S1  †). The increase in carrier mobility and the decrease in the density of defects are likely attributed to the lone pair electrons of nitrogen which may coordinate with dangling lead atoms near the perovskite/HTL interface, passivating positive under-coordinated Pb defects and inhibiting the recombination of carriers.  35, 36  In order to provide more direct evidence regarding the Pb coordination situation, we conducted X-ray photoelectron spectroscopy (XPS) measurement. As shown in Fig.  S7 , † the binding energy with respect to 4f 7/2 of divalent Pb 2+ in the reference (bare perovskite lm) and the sample covered with P4VP was measured to be 138.9 eV and 138.6 eV, respectively. Compared with the pristine perovskite lm, the binding energies of Pb valence electrons exhibit a slight shi toward lower values when treated with P4VP. It is reported that species with lone pair electrons of the pyridine group in P4VP can form coordination bonds when interacting with undercoordinated Pb atoms, which decreases the binding energy of Pb 4f orbitals. This thus indicates that P4VP plays an important role in defect passivation, which is in line with previous reports.  37  Additionally, to further understand the charge carrier dynamics in the PSCs, we performed a transient photovoltage (TPV) measurement which is related to charge carrier recombination and transient photocurrent (TPC) measurement which is related to charge carrier transportation. These tests have proven to be effective and have been extensively applied to Cu 2 ZnSnS 4 solar cells  38  and PSCs.  15, 39  According to Fig.  3e , we found that the Spiro:P4VP based cell had a longer photovoltage decay time than that of the Spiro based device (the values are 0.70 ms and 0.51 ms, respectively, in Table  S2  †), which implied that the introduction of P4VP reduced the PVSK/HTL interfacial defects and thus decreased the charge carrier recombination rate consistent with published literature results.  36, 37  As shown in Fig.  3f , the devices modied with PV4P exhibited faster photocurrent decay (220 ns) than that of Spiro based devices (310 ns), which further conrmed that the carrier transport in the devices was improved by P4VP modication. Fig.  3g  shows Nyquist plots of the solar cells tested in the dark with applied bias. From the two separate arcs and the corresponding equivalent circuit, we could derive the recombination resistance (R rec ) at low frequency and the contact resistance (R co ) at high frequency. Obviously, the Spiro:P4VP based device has a larger value of R rec (about 50.3 kU) than the Spiro based cell (about 44.7 kU). The larger R rec could effectively suppress the charge recombination, to improve the device performance. With respect to R co , it was observed that the Spiro:P4VP based device has a smaller value than the Spiro based cell. This result revealed that the Spiro:P4VP based cell has more efficient hole transportation within the entire device. To further study the recombination kinetics, we measured the J sc and V oc of the cells at various light intensities from 105 mW cm À2 to 34 mW cm À2 . Fig.  3h  shows a linear relationship between J sc and light intensity. Specically, the Spiro and Spiro:P4VP based devices show a slope of 0.98 and 0.99, respectively. Both slopes are essentially equal to 1 (the cell with Spiro:P4VP is closer), indicating that there are no signicant energy barriers and space charge limits for the charge extraction process in the two devices.  40  Fig.  3i  shows that V oc varies logarithmically (ln(I)) with light intensity, and the slopes for the Spiro and Spiro:P4VP based devices are 1.61kT/q and 1.57kT/q, respectively. Generally, the corresponding charge carrier recombination process is reected by the value of ideality factor (n), which is determined by the slope of the V oc versus incident light intensity J D ¼ 933 0 mV 2 8L 3 ; V oc ¼ E g À nk B T ln J 0 =J q , where q is the elementary charge, k B is the Boltzmann constant, and T is the temperature. It is known that the ideality factor n approaching 2 reects the Shockley-Read-Hall (SRH) type trapassisted recombination. Therefore the solar cells based on Spiro:P4VP possess reduced trap state density, resulting in suppressed J-V hysteresis and improved device efficiency. Then we tracked the stability of the PSC devices. In order to reduce the deviation caused by the small number of samples, 10 devices were measured in each group, which is considered of statistical signicance. The normalized PCE as a function of the storage time in air environment (relative humidity: 25-50%, temperature: 25-40 C) is shown in Fig.  4a . The unencapsulated Spiro:P4VP cells retain 80% of their original PCE (the average value is 19.02%) for over 6000 h storage in ambient air, which is comparable with other reports (Fig.  S8 † ). This means that the modication of HTL lm quality and hydrophobicity by introducing P4VP plays an important role in the long-term stability of the device. We further explored the illumination stability and thermal stability of these devices. Fig.  4b  reveals the device performance evolution upon continuous 1 sun illumination. When P4VP was employed in the Spiro, the device retained 90% of its original PCE aer about 700 h (while that of the device based on Spiro under the same illumination conditions dropped to 80% aer 550 h). In addition, with respect to thermal stability, several previous studies reported that small molecule Spiro-OMeTAD would form pinholes under thermal conditions due to its low glass transition temperature, which increased the contact between the perovskite and electrodes and further induced the device performance degradation.  41  However, by modifying the Spiro lm with P4VP we obtained an impressive result: 80% of the original PCE was maintained under continuous 85 C heating aer 300 h (that of the device based on Spiro under thermal conditions drops to 80% aer 50 h). All of these stability tests demonstrate that the decrease of pinholes by P4VP inhibits the pinhole formation, due to the hydrophobic carbon chain and its so characteristics, which effectively suppress the lm degradation and lead to a better device stability. In order to explore the underlying mechanism of stability improvement, we performed high angle annular dark eld scanning transmission electron microscopy (HAADF-STEM) and energy-dispersive X-ray (EDX) spectroscopy measurements on the devices. The spatial distribution of Ag in the aged devices, including Spiro and Spiro:P4VP, is shown in Fig.  5 . The thickness of the perovskite containing Pb and I (mainly) elements, HTL and Ag electrode was about 500, 200 and 100 nm respectively. Apparently, for the Spiro based devices (Fig.  5a ), substantial Ag signals were observed to penetrate through the entire device layer aer 30 days of aging in a humid environment. However, in the sample with Spiro:P4VP, the Ag signals were only observed in the original layer without apparent diffusion (Fig.  5e ). This suggests that P4VP modied Spiro effectively inhibits the diffusion of Ag ions. The reason is obvious that the P4VP was used early as a selective ion-exchange and chelate-forming resin which can achieve optimum sorption of metal ions via coordinating with pyridine groups.  42  Therefore, it is reasonable to expect that P4VP can also inhibit the penetration of Ag ions through chelation and coordination since it contains pyridine nitrogen which is known as an excellent ligand for silver ions. This also explains why P4VP can prevent Ag ions from spreading. In addition to the suppression of Ag diffusion, we also found that Spiro:P4VP could suppress the diffusion of iodine ions. It is reported that when compared to inert nitrogen, ambient air easily accelerates the corrosion of Ag electrodes, and factually this means that oxygen from air oxidizes HI into water and iodine and the iodine and metallic silver form AgI easily, where methyl ammonium iodide migration is facilitated by the small pinholes in the hole transport layer Spiro-MeOTAD.  29  The formation of silver iodide signicantly increased the series resistance and J-V hysteresis of the corresponding devices. Moreover, the inter-diffusion of ions further accelerates the degradation of the device which is unfavorable to long-term stability.  43  The device based on Spiro:P4VP effectively reduces the pinhole of the HTL, thus inhibiting the diffusion of Ag and I ions, improving the device optoelectronic performance and long-term stability. 
 Conclusion In summary, we have developed a general pinhole suppression method to improve the stability of small-molecule-based HTLs in perovskite solar cells. It successfully reduces the intrinsic pinholes of Spiro during lm fabrication and suppresses the void formation during long-term exposure to humid air. The improvement of device stability is ascribed to the pinhole constraint in both temporal and spatial perspectives. P4VP modied PSCs exhibited excellent stability and can endure more than 6000 h in ambient air (still keeping 80% of their original PCE) without any encapsulation. This is partially attributed to the successful suppression of iodine migration and silver diffusion. Moreover, aer using P4VP, we obtained a certied PCE of 20.6% in the resulting device. These ndings provide a new approach to the fabrication of pinhole free HTLs for efficient perovskite solar cells with improved stability. 
 Experimental section 
 Materials All reagents were used as received without further purication, including PbI 2 (99.999%, Sigma-Aldrich), CsI (99.9%, Sigma-Aldrich), P4VP (AR 98%, Aladdin Industrial Corporation), Spiro-OMeTAD (Lumtec), SnO 2 colloid precursor (Alfa Aesar, tin(IV) oxide, 15% in H 2 O colloidal dispersion), N,N-dimethylformamide (99.99%, Sigma-Aldrich), dimethyl sulfoxide (99.5%, Sigma-Aldrich), isopropanol (99.99%, Sigma-Aldrich), chlorobenzene (99.9%, Sigma-Aldrich), acetone (AR Beijing Chemical Works), ethanol (AR Beijing Chemical Works), aminomethane (CP Beijing Chemical Works), hydrogen iodide (57%, Aladdin Industrial Corporation), 4-tert-butylpyridine (99.9%, Sigma-Aldrich), acetonitrile (99.9%, Sigma-Aldrich) and ITO substrate (Shanghai B-Tree Tech. Consult.). The methylamine iodide (CH 3 NH 3 I), formamidine iodide (HC(NH 2 ) 2 I), methylamine chlorine (CH 3 NH 3 Cl) and methylamine bromine (CH 3 NH 3 Br) were synthesized using the methods reported everywhere. 
 Device fabrication The ITO substrate was sequentially cleaned with ultrapure water, acetone, ethanol and isopropanol. Aer 45 minutes of UV-O 3 treatments, an 80 nm-thick layer of the SnO 2 lm was spin-coated on the substrate with a SnO 2 nanocrystal solution at 4000 rpm for 30 s two times, and then annealed at 150 C for 30 min in air. The standard perovskite lm was fabricated by a twostep solution process: PbI 2 (1.3 M, dissolved in DMF : DMSO (9 : 1, v:v)) mixed with 5% CsI was spin coated on ITO/SnO 2 at 2500 rpm for 30 s and annealed at 70 C for 1 min in a nitrogen glovebox. Aer cooling the PbI 2 coated substrate to room temperature in the nitrogen glovebox, mixed organic cation solution (MAI 0.12 M; MABr 0.05 M; MACl 0.07 M; FAI 0.23 M, dissolved in isopropanol) was spin-coated at 2300 rpm for 30 s and then annealed at 150 C for 15 min in air. Then the HTM solution, a Spiro-OMeTAD/chlorobenzene (60 mg mL À1 ) solution with the addition of 28 mL Li-TFSI/acetonitrile (260 mg mL À1 ) and 24 mL 4-tert-butylpyridine, was deposited by spincoating at 3500 rpm for 30 s. Finally, the device was nished by thermal evaporation of Au (100 nm) under vacuum. For the P4VP doped perovskite lm we just dissolve P4VP with CB and lter, getting a clear solution, and use it as a solvent to dissolve Spiro-OMeTAD, and the content of P4VP is about 0.2 mg mL À1 . Other sections are all the same with the standard sample. 
 Characterization The morphology of Spiro-OMeTAD was determined using a scanning electron microscope (SEM) (SEM, Hitachi S-4800). Photoluminescence (PL) and transient-state photoluminescence (TRPL) were measured by using an FLS980 (Edinburgh Instruments Ltd) with an excitation at 470 nm. The TPV and TPC measurements were performed on a Molex 180081-4320 simulating one sun working conditions, and the carriers were excited by using a 532 nm pulse laser. The electrochemical impedance spectroscopy (EIS) measurements were performed by using an electrochemical workstation (Germany, Zahner Company), employing light emitting diodes driven by Export (Germany, Zahner Company). The current densityvoltage characteristics of the perovskite devices were obtained using a Keithley 2400 source-measure unit under AM 1.5 G illumination at 1000 W m À2 with a Newport Thermal Oriel 91192 1000 W solar simulator. External quantum efficiencies were measured by using an Enli Technology (Taiwan) EQE measurement system. The high angle annular dark eld scanning transmission electron microscopy (HAADF-STEM) measurement was performed by using a FEI Titan G2 microscope equipped with an aberration corrector for probe forming lens. Fig. 1 1 Fig. 1 (a) and (b) Top view SEM images of the perovskite films fabricated atop of Spiro and Spiro:P4VP as HTLs, respectively. (c) and (d) AFM topography images of Spiro and Spiro:P4VP films, respectively. (e) and (f) Contact angle measurements by dropping water on the top of Spiro and Spiro:P4VP films, respectively. (g) The Gibbs free energy variation (DG) of adhesion for Spiro and Spiro:P4VP samples with water. 
 Fig. 2 2 Fig. 2 (a)-(d) The in situ evolution of optical microscopy images of the Spiro film in a 80% humidity environment maintained for 0, 10, 20, and 40 min. (e)-(h) The in situ evolution of optical microscopy images of the Spiro:P4VP film in a 80% humidity environment maintained for 0, 10, 20, and 40 min. (i) Diagram showing the number of holes as a function of time. (j) Schematic illustration of Spiro and Spiro:P4VP films in a humid environment. 
 Fig. 3 (a) J-V curves of the solar cells based on Spiro and Spiro:P4VP with the best performance measured by forward and reverse scans. (b) Steady-state photocurrent measured at a bias voltage (0.92 V for Spiro and 0.94 V for Spiro:P4VP) near the maximum power point. (c) EQE spectra of the PSCs based on Spiro and Spiro:P4VP as HTLs. (d) The space-charge-limited current (SCLC) characteristics of the hole-dominated device with or without P4VP. (e) TPV and (f) TPC decay curves of PSCs deposited with Spiro or Spiro:P4VP. (g) EIS measurements of the PSCs with Spiro and Spiro:P4VP as HTLs. The light intensity dependent (h) J sc and (i) V oc in the corresponding PSC device upon light intensity modulated J-V measurements. 
 Fig. 4 4 Fig. 4 (a) PSC device performance as a function of the storage time in air environment with a humidity of about 25-50% at a temperature of about 25-40 C for Spiro and Spiro:P4VP based samples. (b) PSC device stability upon continuous illumination in a nitrogen atmosphere for Spiro and Spiro:P4VP based samples. (c) PSC device stability upon continuous heating at 85 C for Spiro and Spiro:P4VP based samples. 
 Fig. 5 5 Fig. 5 HAADF-STEM images and EDX maps for silver, lead, and iodine of the aged (a)-(d) Spiro based device and (e)-(h) P4VP-treated device. 
 Table 1 1 Detailed parameters of the champion Spiro based cell and champion Spiro:P4VP based device under forward (À0.2 to 1.2 V) and reverse (1.2 to À0.2 V) scan directions Sample V oc (V) J sc (mA cm À2 ) FF (%) PCE (%) Spiro-reverse 1.112 23.59 76.25 19.98 Spiro-forward 1.079 23.61 71.79 18.29 Spiro:P4VP-reverse 1.129 23.49 78.57 20.84 Spiro:P4VP-forward 1.115 23.46 77.35 20.23 
			 This journal is © The Royal Society of Chemistry 2019